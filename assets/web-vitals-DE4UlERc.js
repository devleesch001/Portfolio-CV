var k=-1,v=function(e){addEventListener("pageshow",function(t){t.persisted&&(k=t.timeStamp,e(t))},!0)},g=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},p=function(){var e=g();return e&&e.activationStart||0},f=function(e,t){var n=g(),i="navigate";return k>=0?i="back-forward-cache":n&&(document.prerendering||p()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},T=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(r){Promise.resolve().then(function(){t(r.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch{}},d=function(e,t,n,i){var r,o;return function(c){t.value>=0&&(c||i)&&((o=t.value-(r||0))||r===void 0)&&(r=t.value,t.delta=o,t.rating=function(a,u){return a>u[1]?"poor":a>u[0]?"needs-improvement":"good"}(t.value,n),e(t))}},y=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},C=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},E=function(e){var t=!1;return function(){t||(e(),t=!0)}},l=-1,S=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},m=function(e){document.visibilityState==="hidden"&&l>-1&&(l=e.type==="visibilitychange"?e.timeStamp:0,x())},b=function(){addEventListener("visibilitychange",m,!0),addEventListener("prerenderingchange",m,!0)},x=function(){removeEventListener("visibilitychange",m,!0),removeEventListener("prerenderingchange",m,!0)},B=function(){return l<0&&(l=S(),b(),v(function(){setTimeout(function(){l=S(),b()},0)})),{get firstHiddenTime(){return l}}},L=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},A=[1800,3e3],H=function(e,t){t=t||{},L(function(){var n,i=B(),r=f("FCP"),o=T("paint",function(c){c.forEach(function(a){a.name==="first-contentful-paint"&&(o.disconnect(),a.startTime<i.firstHiddenTime&&(r.value=Math.max(a.startTime-p(),0),r.entries.push(a),n(!0)))})});o&&(n=d(e,r,A,t.reportAllChanges),v(function(c){r=f("FCP"),n=d(e,r,A,t.reportAllChanges),y(function(){r.value=performance.now()-c.timeStamp,n(!0)})}))})},P=[.1,.25],j=function(e,t){t=t||{},H(E(function(){var n,i=f("CLS",0),r=0,o=[],c=function(u){u.forEach(function(s){if(!s.hadRecentInput){var M=o[0],q=o[o.length-1];r&&s.startTime-q.startTime<1e3&&s.startTime-M.startTime<5e3?(r+=s.value,o.push(s)):(r=s.value,o=[s])}}),r>i.value&&(i.value=r,i.entries=o,n())},a=T("layout-shift",c);a&&(n=d(e,i,P,t.reportAllChanges),C(function(){c(a.takeRecords()),n(!0)}),v(function(){r=0,i=f("CLS",0),n=d(e,i,P,t.reportAllChanges),y(function(){return n()})}),setTimeout(n,0))}))},O=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=E(e),document.visibilityState==="hidden"?e():(n=t(e),C(e)),n},w=[2500,4e3],h={},D=function(e,t){t=t||{},L(function(){var n,i=B(),r=f("LCP"),o=function(u){t.reportAllChanges||(u=u.slice(-1)),u.forEach(function(s){s.startTime<i.firstHiddenTime&&(r.value=Math.max(s.startTime-p(),0),r.entries=[s],n())})},c=T("largest-contentful-paint",o);if(c){n=d(e,r,w,t.reportAllChanges);var a=E(function(){h[r.id]||(o(c.takeRecords()),c.disconnect(),h[r.id]=!0,n(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return O(a)},!0)}),C(a),v(function(u){r=f("LCP"),n=d(e,r,w,t.reportAllChanges),y(function(){r.value=performance.now()-u.timeStamp,h[r.id]=!0,n(!0)})})}})},F=[800,1800],R=function e(t){document.prerendering?L(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},I=function(e,t){t=t||{};var n=f("TTFB"),i=d(e,n,F,t.reportAllChanges);R(function(){var r=g();r&&(n.value=Math.max(r.responseStart-p(),0),n.entries=[r],i(!0),v(function(){n=f("TTFB",0),(i=d(e,n,F,t.reportAllChanges))(!0)}))})};export{P as CLSThresholds,A as FCPThresholds,w as LCPThresholds,F as TTFBThresholds,j as onCLS,H as onFCP,D as onLCP,I as onTTFB};
